<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据注解，验证</title>
    <meta name="generator" content="VuePress 1.7.0">
    <link rel="apple-touch-icon" href="/docs/apple-touch-icon.png">
    <link rel="icon" href="/docs/favicon.ico">
    <link rel="manifest" href="/docs/manifest.json">
    <meta name="description" content="学到的 用到的 感兴趣的">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/docs/assets/css/0.styles.f7b3d1c5.css" as="style"><link rel="preload" href="/docs/assets/js/app.ebbf42bd.js" as="script"><link rel="preload" href="/docs/assets/js/2.e91ea41e.js" as="script"><link rel="preload" href="/docs/assets/js/18.fd691143.js" as="script"><link rel="preload" href="/docs/assets/js/3.f31d052a.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.b4b51801.js"><link rel="prefetch" href="/docs/assets/js/11.a431a81f.js"><link rel="prefetch" href="/docs/assets/js/12.1f6b7235.js"><link rel="prefetch" href="/docs/assets/js/13.d9ff6aa4.js"><link rel="prefetch" href="/docs/assets/js/14.f7885770.js"><link rel="prefetch" href="/docs/assets/js/15.17c99732.js"><link rel="prefetch" href="/docs/assets/js/16.71c687bf.js"><link rel="prefetch" href="/docs/assets/js/17.8ad4810f.js"><link rel="prefetch" href="/docs/assets/js/19.afb702b1.js"><link rel="prefetch" href="/docs/assets/js/20.a4e19a04.js"><link rel="prefetch" href="/docs/assets/js/21.8b804b37.js"><link rel="prefetch" href="/docs/assets/js/22.b82986ab.js"><link rel="prefetch" href="/docs/assets/js/23.7917dd64.js"><link rel="prefetch" href="/docs/assets/js/24.2b2e5ffb.js"><link rel="prefetch" href="/docs/assets/js/25.48503e12.js"><link rel="prefetch" href="/docs/assets/js/26.efa1f7d6.js"><link rel="prefetch" href="/docs/assets/js/27.b7c67ff6.js"><link rel="prefetch" href="/docs/assets/js/28.43e104a6.js"><link rel="prefetch" href="/docs/assets/js/29.4d280c4e.js"><link rel="prefetch" href="/docs/assets/js/30.b22c2f67.js"><link rel="prefetch" href="/docs/assets/js/31.ad804432.js"><link rel="prefetch" href="/docs/assets/js/32.1099049b.js"><link rel="prefetch" href="/docs/assets/js/33.3dd5e29c.js"><link rel="prefetch" href="/docs/assets/js/34.98d646da.js"><link rel="prefetch" href="/docs/assets/js/35.8f1d466f.js"><link rel="prefetch" href="/docs/assets/js/36.bbed7c7a.js"><link rel="prefetch" href="/docs/assets/js/37.777ee62c.js"><link rel="prefetch" href="/docs/assets/js/38.934e506a.js"><link rel="prefetch" href="/docs/assets/js/39.2e252bff.js"><link rel="prefetch" href="/docs/assets/js/4.e3a22a46.js"><link rel="prefetch" href="/docs/assets/js/40.659d935c.js"><link rel="prefetch" href="/docs/assets/js/41.f2c2f7ee.js"><link rel="prefetch" href="/docs/assets/js/42.619321e9.js"><link rel="prefetch" href="/docs/assets/js/43.42d4eb10.js"><link rel="prefetch" href="/docs/assets/js/44.cb7ff5d2.js"><link rel="prefetch" href="/docs/assets/js/45.6e09cc4a.js"><link rel="prefetch" href="/docs/assets/js/46.dea94a79.js"><link rel="prefetch" href="/docs/assets/js/47.57b2831e.js"><link rel="prefetch" href="/docs/assets/js/48.8e723307.js"><link rel="prefetch" href="/docs/assets/js/49.e5c8403c.js"><link rel="prefetch" href="/docs/assets/js/5.1f4073b2.js"><link rel="prefetch" href="/docs/assets/js/50.d6e3c8e4.js"><link rel="prefetch" href="/docs/assets/js/51.c3667e29.js"><link rel="prefetch" href="/docs/assets/js/52.bb18881d.js"><link rel="prefetch" href="/docs/assets/js/53.be51bb0b.js"><link rel="prefetch" href="/docs/assets/js/54.840b7a76.js"><link rel="prefetch" href="/docs/assets/js/55.2fa45451.js"><link rel="prefetch" href="/docs/assets/js/56.5494f328.js"><link rel="prefetch" href="/docs/assets/js/57.38d0acdd.js"><link rel="prefetch" href="/docs/assets/js/58.6ebf3d7a.js"><link rel="prefetch" href="/docs/assets/js/59.d3d76087.js"><link rel="prefetch" href="/docs/assets/js/6.fbc0230d.js"><link rel="prefetch" href="/docs/assets/js/60.967b85b2.js"><link rel="prefetch" href="/docs/assets/js/61.43942bea.js"><link rel="prefetch" href="/docs/assets/js/62.2448d643.js"><link rel="prefetch" href="/docs/assets/js/63.2a2d7f97.js"><link rel="prefetch" href="/docs/assets/js/64.42a5680c.js"><link rel="prefetch" href="/docs/assets/js/65.12f7634e.js"><link rel="prefetch" href="/docs/assets/js/66.83f182f5.js"><link rel="prefetch" href="/docs/assets/js/67.791074e3.js"><link rel="prefetch" href="/docs/assets/js/68.f57897f8.js"><link rel="prefetch" href="/docs/assets/js/7.170c203a.js"><link rel="prefetch" href="/docs/assets/js/8.280ea156.js"><link rel="prefetch" href="/docs/assets/js/9.85c7d6b8.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.f7b3d1c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.ico" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/backend/dot-net-mvc5/" class="nav-link router-link-active">
  .NET MVC5
</a></li><li class="dropdown-item"><!----> <a href="/docs/backend/gRPC/" class="nav-link">
  Grpc
</a></li><li class="dropdown-item"><!----> <a href="/docs/backend/container/" class="nav-link">
  容器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/frontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/frontend/echarts/" class="nav-link">
  Echarts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/more/books/" class="nav-link">
  看过的书
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/toos/" class="nav-link">
  折腾
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/leetcode/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com/WuHaaaaa/WuHaaaaa.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/backend/dot-net-mvc5/" class="nav-link router-link-active">
  .NET MVC5
</a></li><li class="dropdown-item"><!----> <a href="/docs/backend/gRPC/" class="nav-link">
  Grpc
</a></li><li class="dropdown-item"><!----> <a href="/docs/backend/container/" class="nav-link">
  容器
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/frontend/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/frontend/echarts/" class="nav-link">
  Echarts
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/more/books/" class="nav-link">
  看过的书
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/toos/" class="nav-link">
  折腾
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/ubuntu/" class="nav-link">
  Ubuntu
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/docs/more/leetcode/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com/WuHaaaaa/WuHaaaaa.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>.NET MVC 5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/backend/dot-net-mvc5/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/docs/backend/dot-net-mvc5/01asp-dot-net-mvc5.html" class="sidebar-link">控制器、试图、模型</a></li><li><a href="/docs/backend/dot-net-mvc5/02asp-dot-net-mvc5.html" class="sidebar-link">表单和HTML辅助方法</a></li><li><a href="/docs/backend/dot-net-mvc5/03asp-dot-net-mvc5.html" aria-current="page" class="active sidebar-link">数据注解，验证</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/backend/dot-net-mvc5/03asp-dot-net-mvc5.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/docs/backend/dot-net-mvc5/03asp-dot-net-mvc5.html#正文" class="sidebar-link">正文</a></li><li class="sidebar-sub-header"><a href="/docs/backend/dot-net-mvc5/03asp-dot-net-mvc5.html#完结" class="sidebar-link">完结</a></li></ul></li><li><a href="/docs/backend/dot-net-mvc5/04asp-dot-net-mvc5.html" class="sidebar-link">安全性、权限验证、角色成员分配</a></li><li><a href="/docs/backend/dot-net-mvc5/05asp-dot-net-mvc5.html" class="sidebar-link">Ajax，jQuery插件用法</a></li><li><a href="/docs/backend/dot-net-mvc5/06asp-dot-net-mvc5.html" class="sidebar-link">路由概念，底层实现</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p>在工作中遇到了太多关于MVC的问题，之前没有系统的学习过，现在趁闲暇时间好好吸收一些不熟悉的知识。第三章：数据注解，验证</p></blockquote> <h2 id="正文"><a href="#正文" class="header-anchor">#</a> 正文</h2> <h3 id="required"><a href="#required" class="header-anchor">#</a> Required</h3> <p>设置了该特性后，当提交的时候，若指定了该特性的字段为空，则会提示，不允许为空。</p> <p>后端</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> OrderId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> OrderDate<span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>界面展示</p> <p><img src="https://i.imgur.com/jR75l1V.png" alt=""></p> <h3 id="stringlength"><a href="#stringlength" class="header-anchor">#</a> StringLength</h3> <p>限制输入字符串长度，若属性设置了该特性，则在提交时，就会提示</p> <p>Order.cs</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> OrderId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> OrderDate<span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token comment">//..</span>
<span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/ft76EGS.png" alt=""></p> <p>我们还可以进一步限制字符串长度，可以通过<code>MinimumLength</code>设置</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> OrderId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> OrderDate<span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span>MinimumLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//..</span>
<span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/VFd4T7t.png" alt=""></p> <h3 id="regularexpression"><a href="#regularexpression" class="header-anchor">#</a> RegularExpression</h3> <p>正则表达式验证；对于需要其他格式，例如邮箱格式，手机号码格式，可以使用这个特性。当然，需要匹配相应的正则表达式</p> <p>限制用户在输入<code>Email</code>时，只能输入邮箱格式</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//验证是否是邮箱格式</span>
<span class="token punctuation">[</span><span class="token function">RegularExpression</span><span class="token punctuation">(</span><span class="token string">@&quot;[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示，当用户输入时，若不是邮箱格式，则会提示。若用户不输入任何字符，则不会提示。当然，提示内容还有待改进。</p> <p><img src="https://i.imgur.com/GARnhDx.png" alt=""></p> <h3 id="range"><a href="#range" class="header-anchor">#</a> Range</h3> <p>对于数字输入来说，这个特性可以限制数字最小，最大值，例如：年龄</p> <p><strong>它可以用于<code>int</code>类型，也可以用于<code>double</code>类型。它另外一个版本，可以传入Type类型参数，这使它可以限制<code>Date</code>和<code>Decimal</code>的范围</strong></p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//设置特性，限制输入Age字段的值在18-90之间</span>
<span class="token punctuation">[</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p>前端会字段将该字段类型设置为数字类型，可以通过右边的箭头设置值</p> <p><img src="https://i.imgur.com/LPHxeps.png" alt=""></p> <p>我们还可以进一步的设置金额的范围</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> OrderId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment">//设置金额在指定范围内</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Range</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">decimal</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;0.00&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;19.99&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">double</span></span> Price <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">//设置年龄在指定范围</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Range</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>           
<span class="token punctuation">}</span>
</code></pre></div><p>显示，但是它右边没有数字的快捷键</p> <p><img src="https://i.imgur.com/AThRQmI.png" alt=""></p> <h3 id="compare"><a href="#compare" class="header-anchor">#</a> Compare</h3> <p>用于验证邮箱或密码输入是否正确。当然，也可以验证其他两次输入值</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//验证是否是邮箱格式</span>
<span class="token punctuation">[</span><span class="token function">RegularExpression</span><span class="token punctuation">(</span><span class="token string">@&quot;[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Email <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">//验证两次输入邮箱是否正确</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Compare</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Email&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ConfirmEmail <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示，当两次输入邮箱格式不正确时，就会提示输入的不匹配</p> <p><img src="https://i.imgur.com/5y0xtyC.png" alt=""></p> <h3 id="remote"><a href="#remote" class="header-anchor">#</a> Remote</h3> <p>可以调用服务器端的验证，例如：<strong>前端验证某个用户输入的用户名是否已经存在</strong>，这种情况，前端是无法独立验证的。这时候就需要后端去查询数据库，进行验证，然后返回到前端</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//接收两个参数，分别是action与controller</span>
<span class="token punctuation">[</span><span class="token function">Remote</span><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>在<code>OrdersController.cs</code>中添加验证方法</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">JsonResult</span> <span class="token function">CheckUserName</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> username<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//从orders中尝试查找与输入用户名相同的数据</span>
    <span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> db<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>UserName <span class="token operator">==</span> username<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//返回true or false</span>
    <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>前端需要引用相应的<code>js</code>，否则验证不会生效，<code>Create.cshtml</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/Scripts/jquery.validate.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/Scripts/jquery.validate.unobtrusive.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>若<code>BundleConfig.cs</code>添加了相应的引用</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">// For more information on bundling, visit https://go.microsoft.com/fwlink/?LinkId=301862</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RegisterBundles</span><span class="token punctuation">(</span><span class="token class-name">BundleCollection</span> bundles<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    bundles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptBundle</span><span class="token punctuation">(</span><span class="token string">&quot;~/bundles/jquery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>
        <span class="token string">&quot;~/Scripts/jquery-{version}.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
    <span class="token comment">//这个就是上面对应的引用</span>
    bundles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ScriptBundle</span><span class="token punctuation">(</span><span class="token string">&quot;~/bundles/jqueryval&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Include</span><span class="token punctuation">(</span>
        <span class="token string">&quot;~/Scripts/jquery.validate*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以在前端省略一下，<code>Create.cshtml</code></p> <div class="language-html extra-class"><pre class="language-html"><code>@Scripts.Render(&quot;~/bundles/jqueryval&quot;)
</code></pre></div><p>显示，在之前，已经有了相同的用户名<code>ruahip</code>，当我再次添加同样的用户名，则会提示无效。当然，我们也可以自定义错误信息</p> <p><img src="https://i.imgur.com/DnL1Nx4.png" alt=""></p> <h3 id="自定义错误提示消息"><a href="#自定义错误提示消息" class="header-anchor">#</a> 自定义错误提示消息</h3> <p>我们可以设置每个特性错误后的提示消息，<code>ErrorMessage</code></p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span><span class="token string">&quot;用户名已存在，请尝试其他用户名&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;名字不能为空&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> MinimumLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;字段最短不少于3个字符，最多不超过20个字符&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>当出现了验证，它就会将我们设置的错误信息展示出来</p> <p><img src="https://i.imgur.com/yojVyZV.png" alt=""></p> <p>还可以将字段名称显示出来，这样对用户来说，更有标识性，用<code>{0}</code>占位，可以显示字段名称</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span><span class="token string">&quot;{0}已存在，请尝试其他{0}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}不能为空&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> MinimumLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}最短不少于3个字符，最多不超过20个字符&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/Fz4ta8V.png" alt=""></p> <p>如果程序支持多语言时，这种指错误提示的方法，就比较不合适，所以需要采取其他方式</p> <p><code>ErrorMessages.resx</code>是一个资源文件，其中包含<code>UserNameRepeat</code>相对应的翻译提示，例如：</p> <table><thead><tr><th>指定键</th> <th>说明</th></tr></thead> <tbody><tr><td><code>UserNameRepeat</code></td> <td>用户名重复，请重新输入</td></tr></tbody></table> <p>当换成英文系统后，<code>ErrorMessage-en-Us.resx</code>将会生效，其中包含的是另外的翻译提示，例如：</p> <table><thead><tr><th>指定键</th> <th>说明</th></tr></thead> <tbody><tr><td><code>UserNameRepeat</code></td> <td>User Name is Repeat,Please try again</td></tr></tbody></table> <div class="language-CSharp extra-class"><pre class="language-csharp"><code>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span> ErrorMessageResourceType <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ErrorMessages</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        ErrorMessageResourceName <span class="token operator">=</span> <span class="token string">&quot;UserNameRepeat&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="查看特定的错误提示消息"><a href="#查看特定的错误提示消息" class="header-anchor">#</a> 查看特定的错误提示消息</h3> <p>如果用户在提交表单的时候，没有输入<code>UserName</code>字段的值，则会触发后台验证，这时候我们可以查看其出现的错误</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> usernameErrorMessage <span class="token operator">=</span> ModelState<span class="token punctuation">[</span><span class="token string">&quot;UserName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Errors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ErrorMessage<span class="token punctuation">;</span>
</code></pre></div><h3 id="自定义验证逻辑"><a href="#自定义验证逻辑" class="header-anchor">#</a> 自定义验证逻辑</h3> <p>ASP.NET 的这些错误验证也有一部分的局限性，当遇到这些特性无法解决的时候，就需要我们自定义验证逻辑，验证逻辑有两个核心的应用方法：</p> <ul><li><p>将验证逻辑封装在自定义的数据注解中</p> <p>这种好处是，完成一个注解，可以在多个模型中重用，但是需要判断不同类型的模型</p></li> <li><p>将验证逻辑直接封装在模型对象中</p> <p>这种的好处是，只考虑应用当前注解的模型，而不用考虑其他，实现起来更简单，但是不利于重用</p></li></ul> <h4 id="封装在自定义数据注解中"><a href="#封装在自定义数据注解中" class="header-anchor">#</a> 封装在自定义数据注解中</h4> <p>新建一个类，<code>MaxWordsAttribute.cs</code></p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">/// &lt;summary&gt;</span>
<span class="token comment">/// 自定义验证逻辑</span>
<span class="token comment">/// 允许用户输入姓氏，单词量不超过10个</span>
<span class="token comment">/// &lt;/summary&gt;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MaxWordsAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ValidationAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">int</span></span> _maxWords<span class="token punctuation">;</span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// 创建构造函数，传入限制单词的最大个数</span>
    <span class="token comment">/// 提供一个默认的错误提示消息（在没有指定ErrorMessage时使用，同时支持多语言）</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token comment">/// &lt;param name=&quot;maxWords&quot;&gt;&lt;/param&gt;</span>
    <span class="token keyword">public</span> <span class="token function">MaxWordsAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> maxWords<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token string">&quot;{0} has too many words.&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _maxWords <span class="token operator">=</span> maxWords<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">ValidationResult</span> <span class="token function">IsValid</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">ValidationContext</span> validationContext<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//value 即表示输入的值，若输入不为空，则进行验证单词长度</span>
        <span class="token comment">//否则返回Success，表示验证通过</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> valueAsString <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//计算单词数</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>valueAsString<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length <span class="token operator">&gt;</span> _maxWords<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token comment">//DisplayName表示当前正在验证的字段名，用来格式化错误信息（{0}的占位）</span>
                <span class="token class-name"><span class="token keyword">var</span></span> errorMessage <span class="token operator">=</span> <span class="token function">FormatErrorMessage</span><span class="token punctuation">(</span>validationContext<span class="token punctuation">.</span>DisplayName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//返回格式化后的错误信息</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationResult</span><span class="token punctuation">(</span>errorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">//也可以指定返回固定字符串（但是这么做不灵活，而且也不支持多语言）</span>
                <span class="token comment">//return new ValidationResult(&quot;Too many words.&quot;);</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ValidationResult<span class="token punctuation">.</span>Success<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后我们可以在<code>Order.cs</code>中使用它。而且它完好的支持自定义错误信息、默认错误信息以及多语言</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token comment">//最大单词数不超过10个，使用默认错误信息</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MaxWords</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">//最大单词数不超过10个，使用自定义错误信息</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MaxWords</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;There are too many words in {0}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Address <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token comment">//最大单词数不超过10个，使用多语言支持（截图中未出现，需要其他资源文件、代码，还没有研究到那里，代码倒是可以这么写，不过界面上会报错，可以先把这个特性注释）</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MaxWords</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> ErrorMessageResourceType <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">ErrorMessages</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          ErrorMessageResourceName <span class="token operator">=</span> <span class="token string">&quot;CityMaxWord&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> City <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示（前端还是需要引用哪个验证的<code>js</code>，否则不会生效），<code>Create.cshtml</code></p> <p><strong>引用<code>js</code>，需要在代码之前，若在<code>_layout.cshtml</code>中引用，则应该在<code>@RenderBody()</code>之前，否则js也不会生效</strong></p> <div class="language-html extra-class"><pre class="language-html"><code>@Scripts.Render(&quot;~/bundles/jqueryval&quot;)
<span class="token comment">&lt;!--或者--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/Scripts/jquery.validate.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/Scripts/jquery.validate.unobtrusive.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://i.imgur.com/i1FpUiw.png" alt=""></p> <h4 id="封装在模型对象中"><a href="#封装在模型对象中" class="header-anchor">#</a> 封装在模型对象中</h4> <p>这种模式，可以直接在<code>Model</code>中操作</p> <blockquote><p>这种方式，对于模型中，有多个属性比较时，会更适合</p></blockquote> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//继承并实现一个接口</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IValidatableObject</span></span>
<span class="token punctuation">{</span>    
    <span class="token keyword">public</span> <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>ValidationResult<span class="token punctuation">&gt;</span></span> <span class="token function">Validate</span><span class="token punctuation">(</span><span class="token class-name">ValidationContext</span> validationContext<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>LastName <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> LastName<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string character">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Length  <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//后一个参数是一个数组，可以传入多个属性与结果关联，到时候会显示多个属性的提示</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ValidationResult</span><span class="token punctuation">(</span><span class="token string">&quot;The Last name has too many words!&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;LastName&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>显示，在所有的验证都通过后，才会验证该字段</p> <p><img src="https://i.imgur.com/CjLzEbt.png" alt=""></p> <h3 id="显示和编辑注解"><a href="#显示和编辑注解" class="header-anchor">#</a> 显示和编辑注解</h3> <p>在填写表单时，我们可能会有修改字段本身显示的需求，例如：<code>UserName</code>，我可能想显示为<code>用户名</code>，这时候，我们就需要其他的一些特性来渲染表单，让它生成为我们更需要的格式</p> <h3 id="display"><a href="#display" class="header-anchor">#</a> Display</h3> <p>通过这个特性，可以随心所欲的修改显示字段为我们想要的</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}已存在，请尝试其他{0}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;用户名&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}不能为空&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> MinimumLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}最短不少于3个字符，最多不超过20个字符&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;First Name&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/JDOXZNc.png" alt=""></p> <p>通过这个特性，我们也可以对它进行排序，前端就会按照我们排序来显示，不过它只对自动生成的<code>Model</code>生效，若手动排序，则不会有效果，<code>Order</code>属性设置越小，排序越靠前，默认<code>10000</code></p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}已存在，请尝试其他{0}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;用户名&quot;</span><span class="token punctuation">,</span>Order <span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span><span class="token attribute-arguments"><span class="token punctuation">(</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}不能为空&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> MinimumLength <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}最短不少于3个字符，最多不超过20个字符&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;First Name&quot;</span><span class="token punctuation">,</span>Order <span class="token operator">=</span> <span class="token number">15001</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Required</span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StringLength</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span><span class="token string">&quot;Last Name&quot;</span><span class="token punctuation">,</span>Order <span class="token operator">=</span> <span class="token number">15000</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token comment">//[MaxWords(10)]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>手动（这种情况，顺序将不会有任何改变）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    @Html.LabelFor(model =&gt; model.UserName, htmlAttributes: new { @class = &quot;control-label col-md-2&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        @Html.EditorFor(model =&gt; model.UserName, new { htmlAttributes = new { @class = &quot;form-control&quot; } })
        @Html.ValidationMessageFor(model =&gt; model.UserName, &quot;&quot;, new { @class = &quot;text-danger&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    @Html.LabelFor(model =&gt; model.FirstName, htmlAttributes: new { @class = &quot;control-label col-md-2&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        @Html.EditorFor(model =&gt; model.FirstName, new { htmlAttributes = new { @class = &quot;form-control&quot; } })
        @Html.ValidationMessageFor(model =&gt; model.FirstName, &quot;&quot;, new { @class = &quot;text-danger&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    @Html.LabelFor(model =&gt; model.LastName, htmlAttributes: new { @class = &quot;control-label col-md-2&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        @Html.EditorFor(model =&gt; model.LastName, new { htmlAttributes = new { @class = &quot;form-control&quot; } })
        @Html.ValidationMessageFor(model =&gt; model.LastName, &quot;&quot;, new { @class = &quot;text-danger&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://i.imgur.com/GALTgG5.png" alt=""></p> <p>自动（会生效，但是样式不好看）</p> <div class="language-html extra-class"><pre class="language-html"><code>@using (Html.BeginForm())
{
@Html.AntiForgeryToken()

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>Order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    @Html.ValidationSummary(true, &quot;&quot;, new { @class = &quot;text-danger&quot; })
	
    <span class="token comment">&lt;!--自动生成表单--&gt;</span>
    @Html.EditorForModel()

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-offset-2 col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Create<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-default<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
}
</code></pre></div><p><img src="https://i.imgur.com/7cEeGJK.png" alt=""></p> <h3 id="scaffoldcolumn"><a href="#scaffoldcolumn" class="header-anchor">#</a> ScaffoldColumn</h3> <p>可以隐藏一些HTML辅助方法（如：<code>EditForModel</code>和<code>DisplayForModel</code>渲染的表单）</p> <p>这个特性对于<strong>非<code>EditForModel</code>自动渲染</strong>的界面，将不会生效</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Remote</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;CheckUserName&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token punctuation">,</span> ErrorMessage <span class="token operator">=</span> <span class="token string">&quot;{0}已存在，请尝试其他{0}&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Display</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Name <span class="token operator">=</span> <span class="token string">&quot;用户名&quot;</span><span class="token punctuation">,</span>Order <span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ScaffoldColumn</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UserName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>前端使用<code>EditForModel</code>渲染</p> <div class="language-html extra-class"><pre class="language-html"><code>@using (Html.BeginForm())
{
@Html.AntiForgeryToken()

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-horizontal<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>Order<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    @Html.ValidationSummary(true, &quot;&quot;, new { @class = &quot;text-danger&quot; })

    <span class="token comment">&lt;!--自动生成表单--&gt;</span>
    @Html.EditorForModel()

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-offset-2 col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Create<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-default<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
}
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/IJlTPAw.png" alt=""></p> <p>这个特性对于<strong>非<code>EditForModel</code>自动渲染</strong>的界面，将不会生效</p> <p><code>UserName</code>还是在表单中</p> <p><img src="https://i.imgur.com/wv7ZiAd.png" alt=""></p> <h3 id="displayformat"><a href="#displayformat" class="header-anchor">#</a> DisplayFormat</h3> <p>格式化输入元素</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//ApplyFormatInEditMode 默认值为False，因为若不为false，又没有设置格式化值，提交的时候将会把‘$’这种符号一并提交</span>
<span class="token punctuation">[</span><span class="token function">DisplayFormat</span><span class="token punctuation">(</span>ApplyFormatInEditMode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> DataFormatString <span class="token operator">=</span> <span class="token string">&quot;{0:c}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Total <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示（在渲染为列表的时候就会自动加上货币符号）</p> <p><img src="https://i.imgur.com/qqemD5h.png" alt=""></p> <p>当编辑的时候，会自动加上，新增的时候没有（不知道为什么）</p> <p><img src="https://i.imgur.com/HrwvDRw.png" alt=""></p> <h3 id="readonly"><a href="#readonly" class="header-anchor">#</a> ReadOnly</h3> <p>为表单某字段加上只读属性，这个特性只有后端模型绑定器会对这个进行验证，前端还是会生成一个可输入文本框</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ReadOnly</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Total <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示，若编辑，提交后，这个字段将赋值为<code>0.00</code></p> <p>编辑前</p> <p><img src="https://i.imgur.com/A68gdN7.png" alt=""></p> <p>提交编辑后</p> <p><img src="https://i.imgur.com/tnA0j1X.png" alt=""></p> <p>若想前端显示<code>Readonly</code>，需要在前端设置</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    @Html.LabelFor(model =&gt; model.Total, htmlAttributes: new { @class = &quot;control-label col-md-2&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--添加Readonly属性--&gt;</span>
        @Html.EditorFor(model =&gt; model.Total, new { htmlAttributes = new { @class = &quot;form-control&quot;, @Readonly=&quot;Readonly&quot; } })
        @Html.ValidationMessageFor(model =&gt; model.Total, &quot;&quot;, new { @class = &quot;text-danger&quot; })
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/LTqxRLA.png" alt=""></p> <h3 id="datatype"><a href="#datatype" class="header-anchor">#</a> DataType</h3> <p>该特性可以提供属性的特定用途，例如密码、邮箱、URL、货币、日期、时间、多行文本</p> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//设置日期在指定范围内</span>
<span class="token punctuation">[</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">DateTime</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;2000-01-01 00:00:00&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2099-12-31 23:59:59&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DataType</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType<span class="token punctuation">.</span>Date<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> OrderDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示（这样，当显示的时候就是一个日期拾取器，而且可以验证数据范围）</p> <p><img src="https://i.imgur.com/VCgLWks.png" alt=""></p> <h3 id="hiddeninput"><a href="#hiddeninput" class="header-anchor">#</a> HiddenInput</h3> <div class="language-CSharp extra-class"><pre class="language-csharp"><code><span class="token comment">//隐藏输入表单元素，前端不会显示</span>
<span class="token comment">//需要引用System.Web.Mvc</span>
<span class="token punctuation">[</span><span class="token function">HiddenInput</span><span class="token punctuation">(</span>DisplayValue <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>显示</p> <p><img src="https://i.imgur.com/4ENzIpe.png" alt=""></p> <p>其实只是将<code>type</code>设置了<code>hidden</code>属性</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-val</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-val-number</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>字段 Age 必须是一个数字。<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-val-required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Age 字段是必需的。<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="完结"><a href="#完结" class="header-anchor">#</a> 完结</h2> <p>又看完了一部分，撒花，收获挺多的</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/WuHaaaaa/WuHaaaaa.github.io/edit/master/docs/backend/dot-net-mvc5/03asp-dot-net-mvc5.md" target="_blank" rel="noopener noreferrer">编辑文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021年1月13日星期三晚上10点29分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/backend/dot-net-mvc5/02asp-dot-net-mvc5.html" class="prev">
        表单和HTML辅助方法
      </a></span> <span class="next"><a href="/docs/backend/dot-net-mvc5/04asp-dot-net-mvc5.html">
        安全性、权限验证、角色成员分配
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.ebbf42bd.js" defer></script><script src="/docs/assets/js/2.e91ea41e.js" defer></script><script src="/docs/assets/js/18.fd691143.js" defer></script><script src="/docs/assets/js/3.f31d052a.js" defer></script>
  </body>
</html>
